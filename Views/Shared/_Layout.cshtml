@{
    Layout = null;

    var username = Session["username"] as string;
    var role = Session["role"] as string; // "Admin" | "Quản lý" | "Nhân viên" (đang dùng chuỗi)

    // Cho phép tạo nhân viên nếu là Admin/Quản lý
    var roleName = role ?? "";
    bool CanCreateEmployee = roleName == "Admin" || roleName == "Quản lý";
}
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - QLNS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        body {
            background: #f5f7fb
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 240px;
            background: #0f172a;
            color: #e2e8f0
        }

            .sidebar a {
                color: #cbd5e1;
                text-decoration: none;
                display: block;
                padding: 10px 14px;
                border-radius: 10px;
                margin: 4px 10px
            }

                .sidebar a.active, .sidebar a:hover {
                    background: #1e293b;
                    color: #fff
                }

        .brand {
            font-weight: 700;
            padding: 16px 14px;
            border-bottom: 1px solid #334155
        }

        .content {
            margin-left: 240px;
            min-height: 100vh
        }

        .topbar {
            height: 56px;
            background: #fff;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px
        }

        .tile {
            background: #fff;
            border: 1px solid #e5e7eb;
            border-radius: 14px;
            padding: 28px;
            text-align: center;
            font-weight: 700
        }
    </style>
    @RenderSection("styles", required: false)
</head>
<body>
    <div class="sidebar">
        <div class="brand">G-office <b>QLNS</b></div>
        <nav class="py-2">
            @Html.ActionLink("Dashboard", "Index", "Dashboard", null, new { @class = ViewBag.Menu == "dash" ? "active" : "" })
            @Html.ActionLink("Lịch làm việc", "Index", "Calendar", null, new { @class = ViewBag.Menu == "cal" ? "active" : "" })
            @Html.ActionLink("Công việc", "Index", "Tasks", null, new { @class = ViewBag.Menu == "task" ? "active" : "" })
            @Html.ActionLink("Lương", "Index", "Payroll", null, new { @class = ViewBag.Menu == "pay" ? "active" : "" })
            @Html.ActionLink("Chấm công", "Index", "Attendance", null, new { @class = ViewBag.Menu == "att" ? "active" : "" })
            @Html.ActionLink("Nhân sự", "Index", "Employees", null, new { @class = ViewBag.Menu == "emp" ? "active" : "" })

            @* Chỉ Admin/Quản lý mới thấy mục này *@
            @if (CanCreateEmployee)
            {
                @Html.ActionLink("Đăng ký nhân viên", "Create", "Employees", null, new { @class = ViewBag.Menu == "empCreate" ? "active" : "" })
            }
        </nav>
    </div>

    <div class="content">
        <div class="topbar">
            <div class="fw-semibold">@ViewBag.Title</div>
            <div>
                @if (!string.IsNullOrEmpty(username))
                {
                    <span>Hi, @username (@role)</span>
                    @Html.ActionLink("Thoát", "Logout", "Auth", null, new { @class = "ms-2" })
                }
                else
                {
                    @Html.ActionLink("Đăng nhập", "Login", "Auth", null, new { @class = "ms-2" })
                }
            </div>
        </div>
        <div class="container py-4">
            @RenderBody()
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("scripts", required: false)
</body>
</html>
